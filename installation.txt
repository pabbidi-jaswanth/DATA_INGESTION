# ---- bootstrap imports (top of streamlit_app.py, before any other imports) ----
import os, sys, importlib.util

# Point to the repo root even if the app is launched from elsewhere
APP_DIR = os.path.dirname(os.path.abspath(__file__))
REPO_ROOT = APP_DIR  # if streamlit_app.py is at repo root
if REPO_ROOT not in sys.path:
    sys.path.insert(0, REPO_ROOT)

# Defensive: if 'backend' still isn't importable, load it by path
backend_pkg_dir = os.path.join(REPO_ROOT, "backend")
backend_init = os.path.join(backend_pkg_dir, "__init__.py")
if os.path.isdir(backend_pkg_dir) and os.path.exists(backend_init) and "backend" not in sys.modules:
    spec = importlib.util.spec_from_file_location("backend", backend_init)
    mod = importlib.util.module_from_spec(spec)
    sys.modules["backend"] = mod
    spec.loader.exec_module(mod)
